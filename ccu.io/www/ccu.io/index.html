<title>CCU.IO</title>
<script src="/lib/js/jquery-1.10.2.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>

    $(document).ready(function () {
        var output = $("#output");
        var socket = io.connect( $(location).attr('protocol') + '//' +  $(location).attr('host'));
        socket.on('event', function(obj) {
            console.log("event " + JSON.stringify(obj));
        });

        $("#dataRefresh").click(function() {
            console.log("refresh");
            $("#data").html("");
            socket.emit('getDatapoints', function(obj) {
                console.log(obj);
                $("#data").html(JSON.stringify(obj, null, "  "));
            });

        });

        $("#metaRefresh").click(function() {
            $("#meta").html("");
            socket.emit('getObjects', function(obj) {
                console.log(obj);
                $("#meta").html(JSON.stringify(obj, null, "  "));
            });
        });

        $("#indexRefresh").click(function() {
            $("#index").html("");
            socket.emit('getIndex', function(obj) {
                console.log(obj);
                $("#index").html(JSON.stringify(obj, null, "  "));
            });
        });

    });
</script>
<style type="text/css">
    .box {
        float: left;

    }
    textarea {
        width: 400px;
        height: 320px;
        margin: 5px;
    }
</style>
<body>
<h3>CCU.IO</h3>
    <div class="box">
        regaObject, getObjects()<br>
        <input id="metaRefresh" type="button" value="refresh"/><br/>
        <textarea id="meta"></textarea>
    </div>

    <div class="box">
        datapoints, getDatapoints(),  Arrays: value, timestamp [,ack]<br>
        <input id="dataRefresh" type="button" value="refresh"/><br/>
        <textarea id="data"></textarea>
    </div>

    <div class="box">
        regaIndex, getIndex(), Name Arrays: id, TypeName [,Parent]<br>
        <input id="indexRefresh" type="button" value="refresh"/><br/>
        <textarea id="index"></textarea>
    </div>
    <div class="box">
        Events<br/>
        <textarea style="width:1220px" id="output"></textarea>
    </div>

</body>
